<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Chemistry Quiz ‚Äì Auto Email Result</title>

<style>
body{
  font-family:Segoe UI,system-ui,sans-serif;
  margin:0;
  background:linear-gradient(135deg,#ff9a9e,#fad0c4,#6a82fb,#fc5c7d);
  background-size:400% 400%;
  animation:bg 12s infinite;
}
@keyframes bg{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}
.card{
  max-width:900px;
  margin:20px auto;
  background:#fff;
  padding:20px;
  border-radius:18px;
  box-shadow:0 10px 30px rgba(0,0,0,.25);
}
h2{text-align:center;color:#6a1b9a}

#timer,#progressText{
  text-align:center;
  font-weight:700;
  margin:6px 0;
}

#progressBar{
  width:100%;
  height:10px;
  background:#eee;
  border-radius:10px;
  overflow:hidden;
}
#progressFill{
  height:100%;
  width:0%;
  background:linear-gradient(90deg,#6a82fb,#fc5c7d);
  transition:.3s;
}

.question{
  margin:16px 0;
  padding:14px;
  border-radius:12px;
  border:2px solid #ddd;
}
.options{display:grid;gap:8px;margin-top:10px}
.opt{
  padding:10px;
  border:2px solid #ddd;
  border-radius:10px;
  cursor:pointer;
  display:flex;
  align-items:center;
}
.opt input{margin-right:10px;transform:scale(1.2)}
.correct{background:#c8f7c5;border-color:#27ae60}
.incorrect{background:#f7c5c5;border-color:#e74c3c}

button{
  padding:12px 18px;
  border:none;
  border-radius:12px;
  font-weight:600;
  cursor:pointer;
  background:linear-gradient(90deg,#fc5c7d,#6a82fb);
  color:#fff;
  margin:10px 5px;
}

#result{
  text-align:center;
  font-size:20px;
  font-weight:700;
  margin-top:15px;
}

@media(max-width:600px){
  button{width:100%}
}
</style>
</head>

<body>
<div class="card">
  <h2>üåà Chemistry Quiz (Result Auto Email)</h2>

  <p id="timer">‚è≥ ‡¶∏‡¶Æ‡ßü: 10:00</p>
  <p id="progressText">‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® 0 / 5</p>
  <div id="progressBar"><div id="progressFill"></div></div>

  <form>
    <div id="questions"></div>
    <button type="button" id="submitBtn">‚úÖ ‡¶ú‡¶Æ‡¶æ ‡¶¶‡¶ø‡¶®</button>
    <button type="button" id="resetBtn">üîÑ ‡¶∞‡¶ø‡¶∏‡ßá‡¶ü</button>
  </form>

  <p id="result"></p>
</div>

<!-- EMAILJS -->
<script src="https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js"></script>
<script>
(function(){
  emailjs.init("uWVAeGQruxSXcvLlN");
})();
</script>

<script>
let quizData=[
{q:"‡¶°‡ßã‡¶¨‡ßá‡¶∞‡¶æ‡¶á‡¶®‡¶æ‡¶∞‡ßá‡¶∞ ‡¶§‡ßç‡¶∞‡¶Ø‡¶º‡ßÄ ‡¶∏‡ßÇ‡¶§‡ßç‡¶∞ ‡¶ï‡ßã‡¶® ‡¶≠‡¶ø‡¶§‡ßç‡¶§‡¶ø‡¶§‡ßá?",opts:["‡¶™‡¶æ‡¶∞‡¶Æ‡¶æ‡¶£‡¶¨‡¶ø‡¶ï ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ","‡¶™‡¶æ‡¶∞‡¶Æ‡¶æ‡¶£‡¶¨‡¶ø‡¶ï ‡¶≠‡¶∞","‡¶Ø‡ßã‡¶ú‡¶®‡ßÄ","‡¶á‡¶≤‡ßá‡¶ï‡¶ü‡ßç‡¶∞‡¶®"],ans:1},
{q:"‡¶®‡¶ø‡¶â‡¶≤‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶∏‡ßá‡¶∞ ‡¶Ö‡¶∑‡ßç‡¶ü‡¶ï ‡¶∏‡ßÇ‡¶§‡ßç‡¶∞‡ßá ‡¶ï‡¶§‡¶ü‡¶ø ‡¶Æ‡ßå‡¶≤?",opts:["‡ß¨","‡ß≠","‡ßÆ","‡ßØ"],ans:2},
{q:"‡¶Ü‡¶ß‡ßÅ‡¶®‡¶ø‡¶ï ‡¶™‡¶∞‡ßç‡¶Ø‡¶æ‡¶Ø‡¶º ‡¶∏‡¶æ‡¶∞‡¶£‡¶ø ‡¶∏‡¶æ‡¶ú‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º?",opts:["‡¶≠‡¶∞","‡¶Ø‡ßã‡¶ú‡¶®‡ßÄ","‡¶™‡¶æ‡¶∞‡¶Æ‡¶æ‡¶£‡¶¨‡¶ø‡¶ï ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ","‡¶Ü‡¶Ø‡¶º‡¶§‡¶®"],ans:2},
{q:"s-‡¶¨‡ßç‡¶≤‡¶ï‡ßá‡¶∞ ‡¶¨‡¶π‡¶ø‡¶É‡¶∏‡ßç‡¶• ‡¶á‡¶≤‡ßá‡¶ï‡¶ü‡ßç‡¶∞‡¶®?",opts:["‡ßß","‡ß®","‡ß¨","‡ßÆ"],ans:1},
{q:"p-‡¶¨‡ßç‡¶≤‡¶ï ‡¶ï‡ßã‡¶® ‡¶ó‡ßç‡¶∞‡ßÅ‡¶™‡ßá?",opts:["‡ßß‚Äì‡ß®","‡ß©‚Äì‡ßß‡ß®","‡ßß‡ß©‚Äì‡ßß‡ßÆ","‡ßß‡ß≠‚Äì‡ßß‡ßÆ"],ans:2}
];

quizData.sort(()=>Math.random()-0.5);

const qBox=document.getElementById("questions");
const progressText=document.getElementById("progressText");
const progressFill=document.getElementById("progressFill");

quizData.forEach((d,i)=>{
  const div=document.createElement("div");
  div.className="question";
  div.innerHTML=`<h4>${i+1}) ${d.q}</h4>`+
  d.opts.map((o,j)=>`
    <label class="opt">
      <input type="radio" name="q${i}" value="${j}">
      ${o}
    </label>`).join("");
  qBox.appendChild(div);
});

document.addEventListener("change",()=>{
  const done=document.querySelectorAll("input:checked").length;
  progressText.textContent=`‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶® ${done} / ${quizData.length}`;
  progressFill.style.width=(done/quizData.length)*100+"%";
});

/* TIMER */
let time=600;
const timerEl=document.getElementById("timer");
const t=setInterval(()=>{
  let m=Math.floor(time/60), s=time%60;
  timerEl.textContent=`‚è≥ ‡¶∏‡¶Æ‡ßü: ${m}:${s.toString().padStart(2,'0')}`;
  time--;
  if(time<0){clearInterval(t);submit();}
},1000);

document.getElementById("submitBtn").onclick=submit;
document.getElementById("resetBtn").onclick=()=>location.reload();

function submit(){
  const answered=document.querySelectorAll("input:checked").length;
  if(answered<quizData.length){
    alert("‡¶∏‡¶¨ ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßá‡¶∞ ‡¶â‡¶§‡ßç‡¶§‡¶∞ ‡¶¶‡¶ø‡¶®");
    return;
  }

  let score=0;
  document.querySelectorAll(".question").forEach((q,i)=>{
    const ch=q.querySelector("input:checked");
    const ops=q.querySelectorAll(".opt");
    if(parseInt(ch.value)===quizData[i].ans){
      score++; ops[ch.value].classList.add("correct");
    }else{
      ops[ch.value].classList.add("incorrect");
      ops[quizData[i].ans].classList.add("correct");
    }
  });

  document.querySelectorAll("input").forEach(i=>i.disabled=true);

  let grade =
    score>=4 ? "üî• ‡¶Ö‡¶∏‡¶æ‡¶ß‡¶æ‡¶∞‡¶£" :
    score>=3 ? "üëç ‡¶≠‡¶æ‡¶≤‡ßã" :
    score>=2 ? "üôÇ ‡¶Æ‡ßã‡¶ü‡¶æ‡¶Æ‡ßÅ‡¶ü‡¶ø" :
    "‚ö†Ô∏è ‡¶Ü‡¶∞‡¶ì ‡¶Ö‡¶®‡ßÅ‡¶∂‡ßÄ‡¶≤‡¶® ‡¶¶‡¶∞‡¶ï‡¶æ‡¶∞";

  document.getElementById("result").innerHTML=
    `üåü ‡¶∏‡ßç‡¶ï‡ßã‡¶∞: ${score}/${quizData.length}<br>${grade}`;

  sendResultEmail(score, grade);
}

function sendResultEmail(score, grade){
  emailjs.send(
    "service_a2xj4rs",
    "template_wmpvtos",
    {
      score: score,
      total: quizData.length,
      grade: grade,
      time: new Date().toLocaleString()
    }
  ).then(()=>{
    console.log("‚úÖ Result email sent");
  },(err)=>{
    console.error("‚ùå Email error",err);
  });
}
</script>
</body>
</html>
